<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.teamb.shareoffice.guest.mapper.GuestMapperB">

	<select id="getLastPK" resultType="int">
		SELECT last_insert_id()	
	</select>

	<!-- 오피스 상세보기페이지에서 파라미터로 officeNo를 받아와 오피스 정보 출력 코드 합치기전엔 일단 No -> 1 -->
	<select id="getOfficeInfoByOfficeNo" resultType="com.teamb.shareoffice.vo.OfficeInfoVo">
		select *
		from SO_OfficeInfo
		where office_no = 1
	</select>
	
	<select id="getBusinessDayInfoByOfficeNo" resultType="com.teamb.shareoffice.vo.BusinessDayVo">
		select * 
		from SO_BusinessDay
		where office_no = 1
	</select>
	
	<!-- order, rental 관련 -->
	<insert id="guestOrder">
		insert into so_order(office_no, member_no, order_personnel, 
							order_refuse_check, order_refuse_comment, order_date)
		values(1, 1, #{order_personnel}, 
			   'N', '', NOW() )
	</insert>
	
	<insert id="officeRental">
		insert into so_rental(order_no, rental_date, rental_price)
		values(#{order_no}, #{rental_date}, #{rental_price} )
	</insert>
	
	<select id="getPriceAndBusinessTimeByDay" resultType="com.teamb.shareoffice.vo.BusinessDayVo">
		select *
		from SO_BusinessDay
		where office_no = #{office_no} and business_day = #{business_day}
	</select>


</mapper>