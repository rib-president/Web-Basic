--ROLLBACK
CREATE TABLE DEPT01
AS
SELECT * FROM DEPT;

SELECT * FROM DEPT01;	--4행 존재

DELETE FROM DEPT01;	--4행 삭제
	
SELECT * FROM DEPT01;	--0행 존재

ROLLBACK;		--맨 처음 CREATE 됐을 때로 ROLLBACK

SELECT * FROM DEPT01;	--4행 존재

DELETE FROM DEPT01 WHERE DEPTNO=20;	--DEPTNO가 20인 행 삭제

ROLLBACK;		--맨 처음 CREATE 됐을 때로 ROLLBACK


--COMMIT
CREATE TABLE DEPT02
AS
SELECT * FROM DEPT;

DELETE FROM DEPT02 WHERE DEPTNO=20;

SELECT * FROM DEPT02;

COMMIT;

ROLLBACK;

DELETE FROM DEPT02 WHERE DEPTNO=40;

CREATE TABLE DEPT03
AS
SELECT * FROM DEPT;

SELECT * FROM DEPT03;

ROLLBACK;

SELECT * FROM DEPT01;

DELETE DEPT03 WHERE DEPTNO=20;

TRUNCATE TABLE DEPT03;

ROLLBACK;

--SAVEPOINT
DROP TABLE DEPT03;
DROP TABLE DEPT02;

SELECT * FROM DEPT01;

DELETE FROM DEPT01 WHERE DEPTNO=40;

COMMIT;
ROLLBACK;

DELETE FROM DEPT01 WHERE DEPTNO=30;

SAVEPOINT C1;   --C1전에 DELETE 등 DML 명령어의 수행결과를 임시 저장(임시 COMMIT)

DELETE FROM DEPT01 WHERE DEPTNO=20;

SAVEPOINT C2;

DELETE FROM DEPT01 WHERE DEPTNO=10;

ROLLBACK TO C2;     --SAVEPOINT C2로 ROLLBACK

ROLLBACK TO C1;

ROLLBACK;





